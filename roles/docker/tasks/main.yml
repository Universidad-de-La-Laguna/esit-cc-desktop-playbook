
- name: Uninstall old docker
  apt: name={{item}} state=absent update_cache=yes
  with_items:
       - docker
       - docker-engine
       - docker.io


- name: Install list of packages
  apt: name={{item}} state=installed update_cache=yes
  with_items:
       - apt-transport-https 
       - ca-certificates
       - curl
       - software-properties-common


- name: add an apt key
  apt_key:
       url: https://download.docker.com/linux/ubuntu/gpg 
       state: present

- apt_repository: 
    repo: deb https://download.docker.com/linux/ubuntu xenial stable
    state: present

- name: Install list of packages
  apt: name={{item}} state=installed update_cache=yes
  with_items:
       - docker-ce


